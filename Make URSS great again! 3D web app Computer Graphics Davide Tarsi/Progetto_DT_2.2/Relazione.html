
<!doctype html>
<html>
	<head>
		<title>Make URSS great again!</title>
		<style>
			h1 {
				color: rgb(190, 6, 18);
				font-size: 50px;
			}
			h1, h2, h3 {
				position: relative;
				text-align: center;
			}
			p, ul, li {
				margin-left: 20px;
				margin-right: 20px;
				font-size: 20px;
			}
			body {
			  background-color: rgb(34, 34, 34);
              color: rgb(235, 232, 232);
			}
			div {
				width:100%;
				display: flex;
				justify-content: center;
			}
			img {
				margin: 5px;
			}
		</style>
	</head>
	
	<body>
		<h1>Make URSS great again!</h1>
		<h2>Progetto di esame per il corso di Fondamenti di Computer Graphics</h2>
		<h3>Davide Tarsi, matricola 1060959</h3>
		
		<div>
			<img src="images\Cattura11.PNG" height="600" >
		</div>
		
		<br>
		<h2>Introduzione e contesto</h2>
		<p>
			Nella lontana primavera del 2020 una sconosciuta minaccia mise a rischio la quotidianità di tutte le persone
			del globo terrestre: la SARS-CoV-2, anche nota con il nome di Covid19 o Coronavirus.<br>
			Per colpa di questo virus, interi paesi furono costretti a mettere in atto misure restrittive quali la chiusura
			di tutti i ristoranti e la quarantena forzata nelle proprie abitazioni.
			Per questo motivo, le persone cominciarono a perdere il senso dell'orientamento e del tempo, e l'unica certezza
			che rimaneva nelle loro misere vite........ era la PIZZA A DOMICILIO!<br>
		</p>
		<p>
			Lo scopo del gioco è completare la missione di consegna della pizza a domicilio utilizzando l'automobile 
			delle consegne fornita dalla Pizzeria da Laura. In particolare, si dovranno effettuare tre diverse consegne in
			tre diverse aree: la posizione esatta delle consegne non è nota al giocatore, che dovrà scoprirla vagando per 
			le strade della città. Una volta individuata l'area di consegna, segnalata accuratamente, dovrà raggiungerla: 
			solo allora potrà consegnare la pizza ordinata. <br>
			Ovviamente, meno tempo ci metterà meglio sarà, ma - considerando le restrizioni in atto - la città sarà deserta,
			perciò non dovrebbero esserci problemi di traffico. Come sappiamo, se la pizza arriva fredda il cliente 
			non sarà contento, quindi diamo il meglio e tiriamo fuori il pilota di F1 che abbiamo dentro di noi! <br>
			Un'ultima cosa da sottolineare è che, viste le normative vigenti dovute alla situazione pandemica, il fattorino
			purtroppo non potrà scendere dall'auto per consegnare la pizza, seppur dotato di ffp2; di conseguenza, utilizzerà 
			un sofisticato e avanguardista meccanismo di teletrasporto hi-tech che farà dematerializzare la pizza situata nel 
			bagagliaio dell'auto e la farà riapparire nell'area di consegna indicata dal cliente. 
			Provvederà poi il cliente ad effettuare il ritiro.
		</p>
		<br>
		<br>
		<h2>Ambiente</h2>
		
		<div>
			<img src="images\mappa.jpg" height="200" >
			<img src="images\pizzeria.jpg" height="200" >
			<img src="images\world.jpg" height="200" >
			<img src="images\Cattura3.PNG" height="200" >
		</div>
		
		<p>
			Per la realizzazione della città, sono state utilizzate diverse tecniche.<br>
			Prima di tutto è stato creato uno skybox tramite un cubo texturato adeguatamente; questo skybox non ha 
			dimensioni infinite, perciò c'è la possibilità che la macchina cada "nel vuoto" uscendo dal mondo in cui si trova.
			Per evitare questo problema sono state gestite le pareti del cubo come ostacoli e in modo che, quando la 
			macchina sbatte contro una di queste pareti, semplicemente si ferma e indietreggia per poter effettuare le manovre
			di rotazione.
		</p>
		
		<p>	
			L'alternativa allo skybox così realizzato era un'altra implementazione che però risultava strana dal punto 
			di vista visivo poiché grazie (o per colpa) della visualizzazione prospettica, essa assumeva strane fattezze 
			se si guardava all'orizzonte. Per tale motivo si è preferito utilizzare il primo metodo.
		</p>
	
		<p>	
			L'ambiente è stato poi arricchito inserendo un piano texturato che rappresenta il terreno, o meglio, la mappa 
			della città, con la sua incredibile rete stradale che ha ispirato ingegneri civili di ogni età e provenienza. 
			L'area in cui è situata la pizzeria da Laura si trova in una zona residenziale, resa graficamente tramite l'uso di 
			obj wavefront che rappresentano palazzi, fontane e così via.
			<br>
			La difficoltà maggiore nel gestire questi tipi di oggetti è la texture, in quanto per renderla graficamente 
			bisognerebbe gestire molti parametri legati al tipo di materiale e implementare il modello di illuminazione di Phong.
			Per semplicità, si è scelto di applicare una texture a tinta unita, consapevoli della resa di medio-bassa qualità,
			ma un possibile sviluppo sarebbe appunto quello di gestire i diversi oggetti inclusi nell'obj e 
			renderli in base alle loro caratteristiche.
			<br>
			Per le stesse motivazioni citate precedentemente riguardo allo skybox, la macchina attualmente attraversa i
			palazzi e tutti gli altri oggetti, ma si potrebbe gestire la problematica trovando le coordinate degli edifici e 
			considerandole come ostacoli, lasciando questo punto aperto per sviluppi futuri.
		</p>
		<br>
		<br>
		<h2>Illuminazione e ombre</h2>
		
		<div>
			<img src="images\Cattura.PNG" height="200" >
			<img src="images\Cattura8.PNG" height="200" >
			<img src="images\Cattura9.PNG" height="200" >
			<img src="images\Cattura6.PNG" height="200" >
		</div>
		
		<p>	
			Per illuminare il mondo, è stata posta una luce sulla sommità del cubo in modo da simulare la presenza del sole.
			Tale luce è costruita come una luce direzionale che, colpendo gli oggetti, grazie ad una depth_texture (che sfrutta 
			le coordinate di profondità), è in grado di determinare quali oggetti siano in ombra e quali no.
			Si è poi stabilito un bias fisso che limiti il cosiddetto effetto "shadow acne", per quanto possibile.
			<br><br>
			Il problema principale di questo tipo di illuminazione sono le ombre: esse risultano pixelate sia sugli oggetti, 
			sia nella loro proiezione prospettica sul piano, rendendo il risultato complessivo accettabile, ma di bassa qualità. 
			Una possibile miglioria da applicare sarebbe quella di individuare un algoritmo di Shading adeguato che possa 
			ammorbidire i contorni delle ombre e renderle più gradevoli e realistiche.
		</p>
		<br>
		<br>
		<h2>Oggetti in movimento</h2>
		
		<div>
			<img src="images\Cattura4.PNG" height="200" >
			<img src="images\Cattura5.PNG" height="200" >
			<img src="images\advert.jpg" height="200" >
			<img src="images\front-pizza.jpg" height="200" >
		</div>
		
		<p>	
			Al contrario delle geometrie utilizzate per disegnare palazzi e simili, che sono fisse, nella scena ci sono 
			anche degli oggetti in movimento, come il fantastico bolide delle consegne, che per ovvi motivi è color Rosso Ferrari.
			Con questo, ovviamente, si devono muovere anche le ruote e la pizza da consegnare al cliente.
			Per spostarsi nell'ambiente, l'automobile utilizza alcune implementazioni di fisica elementare legate al moto, 
			estrapolate dal file cg-car2.js fornitoci a lezione.
			<br><br>
			Come detto prima, gestendo l'obj come un unico oggetto, non è possibile allo stato attuale rendere i vetri
			dell'auto in modo differente rispetto alla carrozzeria. Per questo motivo, grazie all'utilizzo di Blender, 
			è stato possibile separare il parabrezza, il lunotto posteriore e i finestrini laterali dalla mesh originale, 
			per poi renderli graficamente come due oggetti distinti.
			Con questo escamotage, che non è sicuramente il modo migliore di gestire il problema (ma visivamente funziona),
			basta applicare le stesse matrici di trasformazione alle due geometrie affinché appaiano come un unico elemento, 
			ottenendo l'effetto desiderato.
			<br><br>
			Un'ultima cosa che vale la pena sottolineare riguardo all'automobile è che sul suo tettuccio sono stati aggiunti 
			due piani che rappresentano i cartelloni pubblicitari della pizzeria. 
			Su questi cartelloni, è presente anche la foto dell'autrice, evidente amante della pizza.
			Una problematica riscontrata riguardo a questi ultimi concerne l'illuminazione: una volta inseriti i piani 
			e posizionati correttamente sull'auto, indipendentemente da come si spostasse l'auto, questi rimanevano
			sempre completamente neri, probabilmente perché la direzione della luce non riusciva mai a colpirli completamente.
			Per questo motivo, si è scelto di renderli graficamente in modo indipendente dalla luce.			
		</p>
		<br>
		<br>
		<h2>Interazione con l'interfaccia</h2>
		
		<p>
			All'utente sono permesse diverse azioni, fruibili sia su pc sia su mobile.
			Principalmente l'interfaccia si presenta con una canvas in cui si vede l'ambientazione e con cui si può 
			interagire in diversi modi:
		</p>	
			<ul>
				<li>Attraverso la tastiera</li>
				<li>Attraverso il mouse</li>
				<li>Attraverso il touchscreen (nel caso mobile)</li>
			</ul>
		<h3>Versione Desktop</h3>
		
		<div>
			<img src="images\Cattura1.PNG" height="300" >
			<img src="images\Cattura2.PNG" height="300" >
		</div>
		<p>
			In questa versione del gioco per far muovere l'automobile è necessario utilizzare la tastiera nel 
			seguente modo:
		</p>
		<ul>
			<li>Tasto W: acceleratore in avanti</li>
			<li>Tasto S: acceleratore in retromarcia</li>
			<li>Tasto A: rotazione a sinistra dello sterzo</li>
			<li>Tasto D: rotazione a destra dello sterzo</li>
			<li>Barra Spaziatrice: consegna della pizza</li>
		</ul>
		<p>
			Da notare che l'automobile in sé non può ruotare semplicemente girando il volante (e di conseguenza lo sterzo 
			delle ruote), ma è necessario usare contemporaneamente l'acceleratore, come nel mondo reale.
			Per questo motivo bisogna tenere premuto nello stesso momento uno dei due tasti W o S.
			<br>
			La barra spaziatrice si può sempre premere, tuttavia la pressione del tasto avrà effetto solamente se l'auto si 
			troverà all'interno dell'area della consegna. Questo è obbligatorio perché il meccanismo di teletrasporto 
			utilizzato è altamente innovativo, ma essendo ancora in via sperimentale ha purtroppo un piccolo raggio d'azione.
		</p>
		<p>
			In alto a destra sono presenti tre bottoni e quattro slider.
			I bottoni permettono di aumentare/diminuire il fov, mentre il bottone "Change camera" permette di vedere ciò
			che il fattorino vedrebbe dallo specchietto retrovisore, traslato leggermente in alto.<br>
			Gli slider sono più che altro uno strumento di debug per lo sviluppatore, ma posso stuzzicare la curiosità anche
			dei giocatori più nerd.
			Essi infatti permettono di modificare il parametro D e la posizione della luce di cui si è parlato in
			precedenza, vedendo in tempo reale che effetto hanno le modifiche sulle ombre se il sole è, ad esempio,
			molto vicino all'orizzonte o molto vicino allo zenit.
		</p>
		<p>
			Infine, per avere una visione più globale di dove si trova l'automobile, è possibile utilizzare il drag del 
			mouse per modificare la visuale. L'utilizzo di questo tipo di funzione è temporaneo, ossia, non appena verrà 
			rilasciato il mouse, si ritornerà alla visuale di default, che è quella che ci permette di vedere in che 
			direzione sta andando l'auto.
		</p>
		
		<br>
		<h3>Versione Mobile</h3>
		<div>
			<img src="images\Cattura7.jpeg" height="300" >
		</div>
		<p>
			Siccome su mobile non si può utilizzare la tastiera durante il gioco, sulla sinistra della canvas sono stati posti
			due bottoni che permettono la rotazione dell'automobile a destra e a sinistra.
			Come detto sopra, l'automobile in sé non può ruotare semplicemente girando il volante, per cui è necessario tenere 
			premuto nello stesso momento uno degli altri due bottoni situati a destra della canvas, che rappresentano 
			l'accelerazione in avanti o in retromarcia. <br>
			La posizione di questi quattro bottoni è stata quindi scelta apposta per fare in modo che il giocatore possa
			impugnare lo smartphone e utilizzare i pollici di entrambe le mani, come fosse un joystick di una console di gioco.
		</p>
		<p>		
			Per la consegna della pizza è poi stato creato un ulteriore bottone, che sarà sempre possibile premere, ma che avrà
			effetto solamente una volta giunti all'interno dell'area di consegna.
			<br>Infine, per la funzione di visualizzazione che nella versione desktop si può avere usando il drag del mouse,
			al momento non è implementata ma si potrebbe utilizzare il multi-touch dello smartphone come se fosse il puntatore.
		</p>
		
		
	
	</body>